import streamlit as st
from PIL import Image
import numpy as np
import face_recognition
import cv2
import matplotlib.pyplot as plt

st.title("My Face lock Application")


## Write a modeule to check the face recogniton as true or false

Murthy_encode = ([-0.1623828 ,  0.04653342,  0.01161166, -0.03424349,  0.0013248 ,
       -0.03539822,  0.06285586, -0.04915472,  0.22290519, -0.11488384,
        0.12746657, -0.04024065, -0.13473171, -0.12601118, -0.05886971,
        0.01495082, -0.15147604, -0.22165403, -0.14522716, -0.1485644 ,
        0.06385751, -0.02870335, -0.03768332,  0.07676293, -0.19894582,
       -0.33323389, -0.05760711, -0.15350968,  0.01563419, -0.14998716,
        0.02583025,  0.01225687, -0.23350695, -0.07048208, -0.13172343,
        0.09283043,  0.07131489, -0.00716987,  0.12382817, -0.01289499,
       -0.15808091,  0.0327069 ,  0.04519808,  0.28847206,  0.19195881,
        0.00226756, -0.05796088,  0.00545903,  0.14457671, -0.23757136,
        0.04157671,  0.13048778,  0.0955095 ,  0.03993412,  0.12785137,
       -0.10607944, -0.02265927,  0.08967625, -0.16474663,  0.07334754,
       -0.05017029, -0.0122032 , -0.05393221, -0.02698892,  0.15466917,
        0.1557806 , -0.0606227 , -0.16097255,  0.11397867, -0.24642392,
       -0.02331564,  0.07522479, -0.02735342, -0.10729504, -0.28739262,
        0.07909709,  0.43461984,  0.0994542 , -0.13895638,  0.08736022,
       -0.16704288, -0.02355339,  0.08605499, -0.02487776, -0.16017792,
        0.07982947, -0.14041388,  0.03954081,  0.16037071,  0.131732  ,
       -0.09414379,  0.12629944, -0.03388852, -0.01206698,  0.0882602 ,
        0.01198926, -0.15035217,  0.03565248, -0.10835436,  0.01355183,
        0.08327612, -0.09456681, -0.05133255,  0.02464756, -0.14607325,
        0.09649454,  0.00678334, -0.00177008, -0.01659189,  0.08086567,
       -0.15439299, -0.00695914,  0.13693032, -0.30044389,  0.14430338,
        0.1331892 , -0.02055757,  0.1749724 ,  0.09957711,  0.02909549,
       -0.03361183,  0.05398968, -0.12244514, -0.03762483,  0.03841956,
       -0.0257196 ,  0.06837945,  0.03819759])



def Verify_the_Image(Image):
    test = face_recognition.load_image_file(Image)
    test = cv2.cvtColor(test, cv2.COLOR_BGR2RGB)
    test_encode = face_recognition.face_encodings(test)[0]
    results = face_recognition.compare_faces([Murthy_encode],test_encode)
    return results


img_file_buffer = st.camera_input("Take a picture")

if img_file_buffer is not None:   
    # Verify the uploaded image
    result = Verify_the_Image(img_file_buffer)
    st.write(result[0])
    if result[0] == True:
        st.write("Face Lock welcomes you")
    if result[0] == False:
        st.write("Alert:: You are not the right person to access")